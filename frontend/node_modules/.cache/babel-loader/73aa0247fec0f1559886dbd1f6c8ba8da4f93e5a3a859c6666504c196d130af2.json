{"ast":null,"code":"// Replace your classifyImage function with this\nconst classifyImage = async file => {\n  if (!file) return;\n  setCurrentView(\"processing\");\n  try {\n    const formData = new FormData();\n    formData.append(\"image\", file);\n\n    // Step 1: Classify image\n    const classifyResponse = await fetch(\"http://localhost:5000/api/public/classify\", {\n      method: \"POST\",\n      body: formData\n    });\n    if (!classifyResponse.ok) {\n      const error = await classifyResponse.json();\n      throw new Error(error.message || 'Server error');\n    }\n    const classifyResult = await classifyResponse.json();\n    const categoryName = classifyResult.category;\n    setClassificationResult(categoryName);\n\n    // Step 2: Fetch instructions for this category\n    const instructionsResponse = await fetch(`http://localhost:5000/api/public/category/${categoryName}`);\n    let instructionsArray = [];\n    if (instructionsResponse.ok) {\n      var _instructionsResult$d;\n      const instructionsResult = await instructionsResponse.json();\n      // Extract instructions from the nested data structure\n      const instructionsString = ((_instructionsResult$d = instructionsResult.data) === null || _instructionsResult$d === void 0 ? void 0 : _instructionsResult$d.instructions) || '';\n      instructionsArray = instructionsString.split('\\n').map(s => s.trim()).filter(s => s.length > 0);\n    } else {\n      // Fallback to hardcoded instructions if API fails\n      instructionsArray = getFallbackInstructions(categoryName);\n    }\n    setDisposalInstructions(instructionsArray);\n    setCurrentView(\"classification\");\n  } catch (error) {\n    console.error(\"Error:\", error);\n    alert(\"Failed to classify image. Check your server.\");\n    resetToWelcome();\n  }\n};","map":{"version":3,"names":["classifyImage","file","setCurrentView","formData","FormData","append","classifyResponse","fetch","method","body","ok","error","json","Error","message","classifyResult","categoryName","category","setClassificationResult","instructionsResponse","instructionsArray","_instructionsResult$d","instructionsResult","instructionsString","data","instructions","split","map","s","trim","filter","length","getFallbackInstructions","setDisposalInstructions","console","alert","resetToWelcome"],"sources":["D:/Projects/Binsight/frontend/src/components/Home.jsx"],"sourcesContent":["// Replace your classifyImage function with this\r\nconst classifyImage = async (file) => {\r\n  if (!file) return;\r\n  setCurrentView(\"processing\");\r\n\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n\r\n    // Step 1: Classify image\r\n    const classifyResponse = await fetch(\"http://localhost:5000/api/public/classify\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    if (!classifyResponse.ok) {\r\n      const error = await classifyResponse.json();\r\n      throw new Error(error.message || 'Server error');\r\n    }\r\n\r\n    const classifyResult = await classifyResponse.json();\r\n    const categoryName = classifyResult.category;\r\n    \r\n    setClassificationResult(categoryName);\r\n\r\n    // Step 2: Fetch instructions for this category\r\n    const instructionsResponse = await fetch(`http://localhost:5000/api/public/category/${categoryName}`);\r\n    \r\n    let instructionsArray = [];\r\n    if (instructionsResponse.ok) {\r\n      const instructionsResult = await instructionsResponse.json();\r\n      // Extract instructions from the nested data structure\r\n      const instructionsString = instructionsResult.data?.instructions || '';\r\n      instructionsArray = instructionsString\r\n        .split('\\n')\r\n        .map(s => s.trim())\r\n        .filter(s => s.length > 0);\r\n    } else {\r\n      // Fallback to hardcoded instructions if API fails\r\n      instructionsArray = getFallbackInstructions(categoryName);\r\n    }\r\n\r\n    setDisposalInstructions(instructionsArray);\r\n    setCurrentView(\"classification\");\r\n\r\n  } catch (error) {\r\n    console.error(\"Error:\", error);\r\n    alert(\"Failed to classify image. Check your server.\");\r\n    resetToWelcome();\r\n  }\r\n};"],"mappings":"AAAA;AACA,MAAMA,aAAa,GAAG,MAAOC,IAAI,IAAK;EACpC,IAAI,CAACA,IAAI,EAAE;EACXC,cAAc,CAAC,YAAY,CAAC;EAE5B,IAAI;IACF,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEJ,IAAI,CAAC;;IAE9B;IACA,MAAMK,gBAAgB,GAAG,MAAMC,KAAK,CAAC,2CAA2C,EAAE;MAChFC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEN;IACR,CAAC,CAAC;IAEF,IAAI,CAACG,gBAAgB,CAACI,EAAE,EAAE;MACxB,MAAMC,KAAK,GAAG,MAAML,gBAAgB,CAACM,IAAI,CAAC,CAAC;MAC3C,MAAM,IAAIC,KAAK,CAACF,KAAK,CAACG,OAAO,IAAI,cAAc,CAAC;IAClD;IAEA,MAAMC,cAAc,GAAG,MAAMT,gBAAgB,CAACM,IAAI,CAAC,CAAC;IACpD,MAAMI,YAAY,GAAGD,cAAc,CAACE,QAAQ;IAE5CC,uBAAuB,CAACF,YAAY,CAAC;;IAErC;IACA,MAAMG,oBAAoB,GAAG,MAAMZ,KAAK,CAAC,6CAA6CS,YAAY,EAAE,CAAC;IAErG,IAAII,iBAAiB,GAAG,EAAE;IAC1B,IAAID,oBAAoB,CAACT,EAAE,EAAE;MAAA,IAAAW,qBAAA;MAC3B,MAAMC,kBAAkB,GAAG,MAAMH,oBAAoB,CAACP,IAAI,CAAC,CAAC;MAC5D;MACA,MAAMW,kBAAkB,GAAG,EAAAF,qBAAA,GAAAC,kBAAkB,CAACE,IAAI,cAAAH,qBAAA,uBAAvBA,qBAAA,CAAyBI,YAAY,KAAI,EAAE;MACtEL,iBAAiB,GAAGG,kBAAkB,CACnCG,KAAK,CAAC,IAAI,CAAC,CACXC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAClBC,MAAM,CAACF,CAAC,IAAIA,CAAC,CAACG,MAAM,GAAG,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL;MACAX,iBAAiB,GAAGY,uBAAuB,CAAChB,YAAY,CAAC;IAC3D;IAEAiB,uBAAuB,CAACb,iBAAiB,CAAC;IAC1ClB,cAAc,CAAC,gBAAgB,CAAC;EAElC,CAAC,CAAC,OAAOS,KAAK,EAAE;IACduB,OAAO,CAACvB,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAC9BwB,KAAK,CAAC,8CAA8C,CAAC;IACrDC,cAAc,CAAC,CAAC;EAClB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}